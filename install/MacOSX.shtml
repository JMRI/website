<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
 <title>
 JMRI: macOS Install Guide
 </title>
	<meta name="author" content="Bob Jacobsen, Egbert Broerse">
	<meta name="keywords" content="java model railroad JMRI install MacOSX macOS">

<!-- Style -->
  <meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
  <link rel="stylesheet" type="text/css" href="/css/default.css" media="screen">
  <link rel="stylesheet" type="text/css" href="/css/print.css" media="print">
  <link rel="icon" href="/images/jmri.ico" type="image/png">
  <link rel="home" title="Home" href="/">
<!-- /Style -->

</head>

<body>
<!--#include virtual="/Header.shtml" -->

<!--#include virtual="/download/Sidebar" -->
<div id="mainContent">
  <h1>JMRI Install Guide: macOS</h1>

		<ul class="snav"><!-- TOC -->
		<li><a href="#installation">Installation</a>
		<li><a href="#startup">Starting JMRI</a>
		<li><a href="#debug">Debugging</a>
		<li><a href="#notes">Notes</a>
		</ul>

    <p>
    Please note:

	<p class="important">These directions are for installing the latest
	4.x releases of JMRI&reg; on current MacOS computers.<br>
    If you have an older machine and need to install an earlier release (such as JMRI
    <a href="../releasenotes/jmri3.10.1.shtml">3.10.1</a>,
    <a href="../releasenotes/jmri2.8.shtml">2.8</a>, or
    even earlier), please see these
    <a href="MacOSXRetro.html">Mac install instructions for old JMRI releases</a>.</p>

  <p>Now, on to the show:</p>

      <a id="installation"></a><h2>Installing JMRI on your MacOS computer</h2>

      <ol>
       <li><a name="sysreq"></a>
       Determine if your system software is compatible with the current releases of JMRI:
       Find the current MacOS version number by choosing "About this Mac" from the Apple menu.</li>
       
       <p>
       JMRI 4.2 and later will work on any MacOS version back to 10.7.3 Lion (2012).
       Note: MacOS X Lion 10.7.1 and 10.7.2 will have to be updated to 10.7.3.

       <p>
       If your Mac hardware doesn't let you update MacOS X to a recent enough version,
       you can still use older versions of JMRI:
       <ul>
        <li>Mac OS X version 10.7.2 "Lion" through 10.6 "Mountain Lion" can run <a href="http://jmri.org/releasenotes/jmri3.10.1.shtml">JMRI 3.10.1</a> using Java 1.7.
            (The youngest Mac that can't run Mountain Lion was shipped in 2009)
        <li>Mac OS X version 10.5 "Leopard" through 10.4 "Tiger" can run <a href="http://jmri.org/releasenotes/jmri2.14.1.shtml">JMRI 2.14.1</a> using Java 1.6.
            (The youngest Mac that can't run Tiger was shipped in 2003)
        <li>For even older hardware, see a <a href="MacOSXRetro.html">separate page</a>.
        </ul>

        <p>The JMRI install will take up about 180&nbsp;MB of disk space, mostly for the Help pages
        and decoder definitions.
        
        <li>Determine if you have the needed hardware drivers:
                
        <p>No Macintosh that runs MacOS has built-in Serial
        Ports, so if your layout hardware needs a serial connection,
        you'll have to use a <a href="../help/en/html/hardware/USBtoSerial.shtml">USB-to-Serial adapter</a>.</p>

        <p>No matter if you have a USB-to-Serial adapter, or a device with a direct 
        USB connection, you will need MacOS drivers (system software) for the hardware you're using.
        Most hardware won't need a separate driver;
        they're already present in MacOS.  In some cases you will need to install a special driver, though,
        so check the manufacturer's web site to make sure.</p>
      
        <p><em>Note: Mac OS X 10.11 El Capitan and later MacOS versions generally require
        signed drivers.  If you installed drivers for a previous version,
        particularly drivers that don't say they support Mac OS X 10.10 Yosemite,
        those older drivers may not work with 10.11 El Capitan.  Go to the 
        web site for your USB adapter, download the newest driver and 
        install it before you update to El Capitan, or right after updating before
        trying to run JMRI.</em>
        
        <p>
        We tested using a Keyspan PDA Adapter; those drivers are available at
        <a href="http://www.keyspan.com/downloads/">
        http://www.keyspan.com/downloads/</a>. Some device drivers will list
        each port under several names, e.g. starting with "/dev/tty" or
        "/dev/cu", for example "/dev/tty.KeyUSA19181.1". In that case, you
        must select the one that starts with "cu", e.g.
        "/dev/cu.KeyUSA19181.1".</p>
          
        <p>There's a MacOS driver for USB-serial adapters
        based on the Prolific PL2303 chipset 
        <a href="http://osx-pl2303.sourceforge.net/">available here</a>.
        If you can't access your USB dongle and it seems to use that
        chipset (you can check in the USB tab of System Profiler), 
        this driver will make it available as /dev/cu.PL2303-xxx.</p>

       <li>Get the JMRI software...</li>

        <p><a href="../download/index.shtml#prod-rel">Download</a> a
        version of JMRI, either the latest production version, or a
        "test version".  Since the version numbers change with every
        release, <a href="../download/index.shtml">this link</a> takes
        you to the general JMRI download page, where you can select
        whichever version you like.</p>

        <p>The JMRI project is continuously adding features, bug
        fixes, examples and tutorials to the release, and so a new
        "test" version appears every month or so.  You may find one of
        these has features that you really want.  These are announced
        in the JMRI users Groups.io group at <a
         href="https://groups.io/g/jmriusers">https://groups.io/g/jmriusers</a>.
        </p>

       <li>...and install it.</li>

        <p>Normally, the download will open a new Finder window showing a
        JMRI folder.  If not, double-click the file you downloaded
        above.  This should open a window with the "JMRI" folder.
        If that still doesn't open a window, look for a newly-mounted 
        disk image (e.g. in Finder) and open that manually.</p>
        
        <p>To install, you just have to move the downloaded JMRI folder to where
        you want it on your computer. Many people put it in
        "Applications", which is the standard location for this.  To
        do that, just drag the JMRI folder onto the "Applications"
        icon.  If you want to keep it somewhere else, just drag the
        folder to the desired location.</p>

      <li>Depending on how your Mac is set up, you might need to 
        install <strong>Java</strong>:
            <ul>
            <li>Let's try the easy way first.  Open the
                JMRI folder you just put in Applications, and
                double click on DecoderPro.  If this starts up
                OK, you have Java installed.  Move to the next
                step.  If it opens a dialog box that offers 
                to install Java, or takes you to the Java
                install web site, just follow those instructions.
            <li>If that doesn't work, and you have a current
                MacOS version, you can get the latest Java JRE installer as a free download at: 
                <a href="http://java.com/download/" target="_blank">java.com/download</a>.<br>
                After that download is complete, follow the included instructions to run the Java installer.<br>
                More on <a href="https://www.java.com/en/download/help/sysreq.xml">Java versions and
                hardware requirements</a> (prompts for Java in your browser).<br>
                Older Java installations typically are removed by a MacOS update. However, older Java
                applications are known to try and reinstall old stuff that might cause conflicts while running JMRI.
                See the <a href="#javase6">instructions</a> on how to check if this applies to your installation.
            </ul>
      <li>Congratulations! Installation is complete.</li>

      </ol>
      
      <a id="update"></a>
      <h2>Updating JMRI</h2>
          <p>If you already have JMRI installed and working, and want to update
          to a newer version, just:
          <ul>
          <li>Download the new version
          <li>Double-click on the downloaded file to open the disk image. That should open the 
            contents in a new Finder window, but if not, open it.
          <li>Drag the new JMRI folder to the Applications icon to replace
            your existing version. If asked whether you want to do that, say OK.
          </ul>
          <p>Your existing configuration information, Panel files, etc will
          continue to be used with the new version.

          <h3>Clean Install</h3>
          <p>If for any reason you wish to start totally clean and discard all previously stored Connections, Roster
          entries and Panels, delete the JMRI settings folder before starting the program. You will find it by choosing
          "Go to Folder..." from the Finder's <b>Go</b> menu (or &#8984;+Shift+G). In the pane that appears, enter
          "~/Library/Preferences/", click "Go". If a "JMRI" folder is present in Preferences, move it to the Trash.
          </p>

      <a id="startup"></a><h2>Starting JMRI</h2>
      
      <p>Connect your computer to your <a
         href="../help/en/html/hardware/index.shtml">Command Station
        hardware</a>.

      <p>You can run the program by double-clicking on the
        "DecoderPro" or "PanelPro" or other application icons in the
        JMRI folder.
      <p>
        Depending on your security settings, when you
        first try to run a new JMRI version (usually by double clicking
        on the icon for DecoderPro or PanelPro), you may get a warning dialog
        that it "can't be opened because it's from an unidentified developer".
        In that case, dismiss the dialog, then hold the Control key
        down and click the icon to get its contextual menu. Select
        the "Open" option. You'll be asked to confirm. Be sure
        to click the "Open" button, and not accept the default "Cancel".
        <table style="border:20px"><tr>
        <td><img src="images/MacOsXWarn.tiff" width="305" height="143"></td>
        <td><img src="images/MacOsXselect.jpg" width="166" height="200"></td>
        <td><img src="images/MacOsXOpen.tiff" width="305" height="143"></td>
        </tr>
        </table>
        
       <p>
       Your next step will be to set the Preferences for your particular layout connection.
       More on this on the <a href="../help/en/html/setup/index.shtml">JMRI Setup help page</a>. 
       Go there next to complete your setup.</p>

       <p> Mac OS uses names like "<tt>cu.SomeName</tt>" and
       "<tt>tty.SomeName</tt>" for devices, including
       USB-attached devices like USB-serial converters,
       LocoBuffer-USBs and similar.  Generally, you'll want to use the
       one that starts with "<tt>cu.</tt>" if both
       <tt>cu.</tt> and <tt>tty.</tt> are present, but
       see the specific installation page for your particular type of
       device.  Sometimes you can recognize your interface from the
       right-hand part of the name.  If not, the easiest way to find
       the name for your interface is to disconnect it, start JMRI,
       write down the list of available devices, close JMRI, reconnect
       the interface, start JMRI again, and look to see which extra
       name has appeared.  That's the name one you want.</p>

<a id="debug"></a><h2>Debugging</h2>

JMRI supports many different Mac computers, 
with several different kinds of processors,
multiple MacOS versions,
and various layout hardware.  
Some combinations can cause trouble. 
This section gives some debugging hints.

<a name="javase6"></a><h3>Java SE 6</h3>
    <p>To check for Java SE 6, JMRI 4.5.2 and up include a script. Follow these steps (assuming
      JMRI is installed in the folder <em>/Applications/JMRI</em>; if it's installed in a different location, adjust the paths as needed):</p>
    <ol>
      <li>Open <em>Terminal.app</em>.
        <p><em>El Capitan only:</em> Reboot into Recovery Mode by restarting your
          Mac and pressing Cmd-R until the Apple logo appears. Once in Recovery Mode,
          select Terminal from the Utilities menu.</p>
        </li>
      <li>Run the command <code>/Applications/JMRI/PanelPro.app/Contents/Resources/uninstall-java6.sh</code> It can take
        up to a half hour to complete. Wait for the message <em>Removed Apple Java SE6</em>.
        <p><em>El Capitan only:</em> Run the command <code>bash /Volumes/Macintosh\ HD/Applications/JMRI/PanelPro.app/Contents/Resources/uninstall-java6.sh /Volumes/Macintosh\ HD</code>
          It can take up to a half hour to complete. Wait for the message <em>Removed Apple Java SE6</em>.</p>
        </li>
      <li><em>El Capitan only:</em> Restart your Mac.</li>
    </ol>
<p>Source: <a href="../releasenotes/jmri4.5.2.shtml"> JMRI 4.5.2 Release notes</a>.</p>

<h3>Vector3f issue</h3>
<p>
Sometimes Macs have an older "vecsub.jar" library installed in a place that
will cause problems for JMRI.  It happens more often when you're compiling your
own version, but it can also happen when just running a download. If you get messages about
<code><pre>
error: cannot find symbol getX()
</pre></code>
or getY() or getZ(), the solution is to copy the JMRI/lib/vecmath-1.5.2.jar file from 
within the JMRI distribution directory to the  ~/Library/Java/Extensions/ directory.
(You might have to create that directory)

<a name="#notes"><h2>Notes</h2></a>

<h3>Customizing your JMRI Installation</h3>

You might want to have more than one Configuration for DecoderPro
or PanelPro preset.  For example, you might to sometimes connect
PanelPro to the Command Station on your layout, or other times 
have a configuration that doesn't use a layout connection so you can 
work with the program on a laptop away from the layout.

<p>
With MacOS, JMRI makes this easy to do. PanelPro and DecoderPro save
their Preferences separately, so they can be configured independently.

<p>
On a Mac, the different Preferences files take their name from the name of the application icon that's invoked.
This lets you create multiple copies of e.g. DecoderPro that each use their own, separate Preferences files.
Let's say you want one called "CoolNewOne".  
	<ul>
	<li>Duplicate the DecoderPro application icon (ctrl-click to get a popup menu and say duplicate, 
	or select the icon and choose duplicate from the File menu in Finder).
	<li>Change the duplicate's name.
	(It's probably better to use a simple one-word name like "CoolNewOne")
	<li>Double click your new icon, and off you go.  
	</ul>

<p>
It won't work to drag one of the JMRI application icons out of the 
JMRI folder, since they need the other files that can be found there.
If you want an icon in some other place, like on your desktop:

	<ul>
	<li>Go to the JMRI folder and select the application icon.
	<li>From the file menu, select "Make Alias"
	<li>Drag that new alias icon to it's new location, and optionally rename it.
	</ul>

<p>
Note that renaming the alias alone does not cause the application icon to be renamed, so the alias will be using the
same Preferences as the original.

<!--#include virtual="/Footer.shtml" -->
   </div><!-- closes #mainContent-->
  </div> <!-- closes #mBody-->
</body>
</html>
